{% extends "base.html" %}
{% block javascript %}
    {{ block.super }}
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.12.0/moment.js"></script>
    <script src="{% static '/js/htmx_dialog.js' %}"></script>
{% endblock javascript %}
{% block css %}
    {{ block.super }}
    <style>
        div.bg-secondary h5 {
            color: white;
            margin: 8px;
        }
    </style>}
{% endblock css %}
{% block title %}{{ block.super }}: Detail on {{ equipment.name }}{% endblock %}
{% block content %}
    <h2>{{ equipment.name }}</h2>
    <main>
        <ul class="nav nav-tabs" id="profile_tabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="details-tab"
                        data-bs-toggle="tab" data-bs-target="#details"
                        type="button" role="tab" aria-controls="details"
                        aria-selected="true">Details</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="pages-tab"
                        hx-get="{{ request.get_full_path }}" hx-target="#pages"
                        data-bs-toggle="tab" data-bs-target="#pages"
                        type="button" role="tab" aria-controls="pages"
                        aria-selected="false">Information</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="resources-tab"
                        hx-get="{{ request.get_full_path }}" hx-target="#resources"
                        data-bs-toggle="tab" data-bs-target="#resources"
                        type="button" role="tab" aria-controls="resources"
                        aria-selected="false">Files</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="userlist-tab"
                        hx-get="{{ request.get_full_path }}" hx-target="#userlist"
                        data-bs-toggle="tab" data-bs-target="#userlist"
                        type="button" role="tab" aria-controls="userlist"
                        aria-selected="false">Users</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="schedule-tab"
                        hx-get="{{ request.get_full_path }}" hx-target="#schedule"
                        data-bs-toggle="tab" data-bs-target="#schedule_container"
                        type="button" role="tab" aria-controls="schedule_container"
                        aria-selected="false">Schedule</button>
            </li>
        </ul>

        <div class="tab-content">
            <div class="tab-pane active" id="details" role="tabpanel" aria-labelledby="details-tab">
                <div class="float-end">
                    {% if equipment.thumbnail %}
                        {{ equipment.thumbnail }}
                    {% endif %}
                </div>
                <div class="col-md-9">
                    <div class="row">
                        <div class="col col-md-3">Equipment :</div><div class="col col-md-9">{{ equipment.name|safe }}</div>
                    </div>
                    <div class="row">
                        <div class="col col-md-3">Description :</div><div class="col col-md-9">{{ equipment.description|safe }}</div>
                    </div>
                    <div class="row">
                        <div class="col col-md-3">Location :</div><div class="col col-med-9">{{ equipment.location }}</div>
                    </div>
                    <div class="row">
                        <div class="col col-md-3">Owner :</div><div class="col col-md-9">
                            {% if equipment.owner %}
                                <a href="/accounts/user/{{ equipment.owner.username }}">{{ equipment.owner.display_name }}</a>
                            {% endif %}
                        </div>
                    </div>
                    <div class="row">
                        <div class="col col-md-3">Schedule :</div><div class="col col-med-9"><a href="{{ equipment.schedule }}">Booking Schedule</a></div>
                    </div>
                </div>
            </div>
            <div class="tab-pane" id="resources" role="tabpanel" aria-labelledby="resources-tab">
            </div>
            <div class="tab-pane" id="pages" role="tabpanel" aria-labelledby="pages-tab">
            </div>
            <div class="tab-pane" id="userlist" role="tabpanel" aria-labelledby="userlist-tab">
            </div>
            <div class="tab-pane" id="schedule_container" role="tabpanel" aria-labelledby="schedule-tab"
                 hx-trigger="refreshSchedule from:body"
                 hx-get="{% url 'equipment:equipment_detail' equipment.pk %}"
                 hx-target="#schedule">
                <div id="schedule"></div>
            </div>

        </div>
        <div id="modal"
             class="modal modal-blur fade"
             style="display: none"
             tabindex="-1">
            <div class="modal-dialog modal-lg modal-dialog-centered" role="document" id="dialog">
                <div class="modal-content"></div>
            </div>
        </div>

    </main>

{% endblock content %}
